<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pagination with Spinner</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-5">

<h2 class="mb-4">Pagination</h2>

<!-- Spinner -->
<div id="loadingSpinner" class="text-center my-4">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>

<!-- Table -->
<table class="table table-striped table-bordered">
  <thead class="table-dark">
    <tr>
      <th>SL No</th>
      <th>First Name</th>
      <th>Email</th>
      <th>Phone Number</th>
    </tr>
  </thead>
  <tbody id="userTable">
    <!-- Table rows will be inserted here -->
  </tbody>
</table>

<!-- Pagination -->
<nav>
  <ul class="pagination">
    <li class="page-item">
      <button class="page-link" id="previousButton">Previous</button>
    </li>
    <li class="page-item">
      <button class="page-link" id="nextButton">Next</button>
    </li>
  </ul>
</nav>

<script>
  const pageItems = 5;
  let currentPage = 1;
  let items = [];

  const tableList = document.getElementById('userTable');
  const prevBtn = document.getElementById('previousButton');
  const nextBtn = document.getElementById('nextButton');
  const loadingSpinner = document.getElementById('loadingSpinner');

  async function fetchData() {
    try {
      loadingSpinner.style.display = 'block'; // Show spinner
      const response = await fetch("https://mocki.io/v1/7209d2cc-b041-48e7-af12-447195e46be0");
      const data = await response.json();
      items = data;
      tableView();
    } catch (error) {
      console.error("Error fetching data:", error);
    } finally {
      loadingSpinner.style.display = 'none'; // Hide spinner after data is loaded
    }
  }

  function tableView() {
    tableList.innerHTML = '';
    const start = (currentPage - 1) * pageItems;
    const end = start + pageItems;
    const paginatedItems = items.slice(start, end);

    for (let i = 0; i < paginatedItems.length; i++) {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${paginatedItems[i].Sl}</td>
        <td>${paginatedItems[i].firstName}</td>
        <td>${paginatedItems[i].email}</td>
        <td>${paginatedItems[i].phone}</td>
      `;
      tableList.appendChild(row);
    }
  }

  prevBtn.addEventListener('click', function () {
    if (currentPage > 1) {
      currentPage--;
      tableView();
    }
  });

  nextBtn.addEventListener('click', function () {
    if (currentPage < Math.ceil(items.length / pageItems)) {
      currentPage++;
      tableView();
    }
  });

  // Call the fetch function when the page loads
  fetchData();
</script>

</body>
</html>
